# KipTool

KipTool основан на [TegraExplorer](https://github.com/suchmememanyskill/TegraExplorer) v4.1.1

## Установка
1. Поместить `KipTool.bin` в `bootloader/payloads` на вашей карте
1. Загрузиться в `Hekate`
1. Загрузить пейлоад: `Payloads` -> `KipTool.bin`

## Управление

### Навигация в меню KipTool
- `A`: Выбрать
- `B`: Назад
- Левый стик или кнопки крестовины `верх`/`низ`: вверх/вниз по меню
- Левый стик или кнопки крестовины `лево`/`право`: перейти к первой/последней записи меню или переключение страниц
- Правый стик `верх`/`низ`: быстрое перемещение по меню вверх/вниз по меню
- `Кнопка захвата` (или касание 3мя пальцами в `рижиме сенсерного управления`): Сделать скриншот (сделанные скриншоты находятся в директории `sd:/tegraexplorer/screenshots` в формате `bmp`)

### Навигация в окне редактирования значения параметра
- `A`: Задать новое значение
- `B`: Выйти без изменений
- Левый стик или кнопки крестовины `лево/право`: изменить значение на +- шаг
- Левый стик или кнопки крестовины `верх/низ`: изменить значение на +- шаг с множителем

### Навигация в окне подтверждения
- `A`: Применить ответ
- `B`: Выйти
- Левый стик или кнопки крестовины `лево`/`право`: переключение между `Yes` и `No`

### Альтернативное управление
- `Громкость +` = `право`
- `Громкость -` = `лево`
- `Питание` = `A`
- `Громкость -` и `Громкость +` одновременно = `B`

### Режим сенсорного управления
Для включения `рижима сенсерного управления` необходимо при загрузке пейлоада `KipTool.bin` зажать кнопку `Громкость -`.
Или же активировать его в главном меню. 

![Touch mode](/screenshots/touch.jpg)
(области "сенсорных кнопок" не отображаются, используйте воображение)

## Использование редактора параметров
1. `Browse SD`
1. Найти ваш `loader.kip` файл
1. Открыть меню файла
1. `Kip tool` -> `Kip Wizard`

При первом запуске `Kip Wizard`'а в корне вашей карты будет создана служебная директория `.kt`.

При первом запуске `Kip Wizard`'а вам будет предложено активировать `механизм сессий`. Для этого `KipTool` добавит `служебную секцию` в конец вашего `loader.kip` файла.

Файл сессии ничто иное, как дамп `CustomizeTable` из вашего `loader.kip` файла. Таким образом, изменения значений параметров сперва производятся в сессии, а затем их можно применить к вашему файлу `loader.kip`.

При повторном открытии `Kip Wizard`'а, если ранее был создан файл сессии, вам будет предложено загрузить его в качестве текущей сессии. При отказе файл сессии будет перезаписан текущими значениями из вашего `loader.kip`.

При загрузке `loader.kip` файла и сессии производится минимальная проверка на соответствие текущей поддерживаемой версии (число после дефиса в версии `Kip Tool`) `CustomizeTable`'а и наличие `CUST` паттерна, что предотвращает случайное открытие других [модулей](https://github.com/Atmosphere-NX/Atmosphere/tree/master/docs/components/modules) `atmosphere`'ы, если в нем конечно случайно нет `CUST` паттерна\)

5. В главном меню выбрать необходимую `категорию`(`CPU`/`GPU`/`RAM`) параметров
6. Выбрать необходимый `параметр`/`таблицу`
7. Для выбранного параметра выбрать `фиксированное значение` или задать вручную, если это возможно через пункт `Manual value`
8. После внесения изменений вернуться на главный экран `Kip Wizard`'а и с помощью `Apply changes` применить изменения к текущему `.kip` файлу

## Цветовые обозначения
### Параметр (в меню выбора параметра)
-  ![#8040ff](https://placehold.co/15x15/8040ff/8040ff.png) - Имеет дефолтное значение
- ![#ff8c00](https://placehold.co/15x15/ff8c00/ff8c00.png) - Имеет недефолтное значение
- ![#ffff40](https://placehold.co/15x15/ffff40/ffff40.png) - Является таблицей

![Params menu](/screenshots/params_menu.jpg)

### Значение (в меню редактирования параметра)
- ![#00ddff](https://placehold.co/15x15/00ddff/00ddff.png) - Является текущим значением
- ![#8040ff](https://placehold.co/15x15/8040ff/8040ff.png) - Является дефолтным значением
- ![#ff8c00](https://placehold.co/15x15/ff8c00/ff8c00.png) - Является недефолтным значением
- ![#ffff40](https://placehold.co/15x15/ffff40/ffff40.png) - Пункт задания значения вручную

![Params menu](/screenshots/edit_param.jpg)

## Профили

`Механизм профилей` позволяет добавлять и использовать различные `loader.kip`'ы в зависимости от ваших нужд

### Добавление профиля

1. С помощью `Browse SD` необходимо найти `kip файл`, который хотим использовать в качестве `профиля`
2. Открываем `меню файла` (нажать `A`)
3. `Kip tool` -> `Add to profiles`

![Add to profiles](/screenshots/add_to_profiles.jpg)

4. С помощью клавиатуры отредактировать название профиля и сохранить (нажать `B` -> `YES`)

![Profile name](/screenshots/profile_name.jpg)

### Выбор профиля

1. В главном меню открыть `Profile - ...`
2. Выбрать из списка нужный `профиль` и нажать `A` -> `YES`

![Profile name](/screenshots/profiles.jpg)

### Удаление профиля

1. В главном меню открыть `Profile - ...`
2. Выбрать из списка нужный профиль и нажать `X` -> `YES`

## Скриншоты

![TE Main menu](/screenshots/te_main_menu.jpg)

![Main menu](/screenshots/main_menu.jpg)

![CPU Params](/screenshots/cpu_params.jpg)

![Value editor](/screenshots/value_editor.jpg)